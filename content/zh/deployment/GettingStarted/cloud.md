---
title: "云服务器挑选/购买指南"
linkTitle: "云服务器指南"
weight: 1
type: docs
---

{{% pageinfo %}}
云服务器挑选和购买指南，与各云服务提供商*利益无关*
{{% /pageinfo %}}

## 选购建议

### 配置
以当前的 FVTT 运行情况看，如果服务器上只运行 FVTT，那么 1G 内存的 Linux 服务器和 2G 内存的 Windows 服务器足够使用。

CPU 核心数尽管对运行效率有直接影响，但单核心也足以满足多人游玩 FVTT。

最重要的因素其实是带宽，如果购买 1Mbps 带宽的服务器用来跑 5 个人的团，意味着每个人在游玩时仅能分配到 200 Kbps = 25 KB/s。
如果一个新场景内的地图 2.5M 大小，则所有玩家平均需要等待 100 秒来下载完毕整张地图，更不必提还需要下载其他资源，*尤其是在服务器上存储了音乐等情况*。

通常认为，运行 FVTT 的服务器带宽最好要在 **5Mbps 以上**（越高越好）。

**然而**，云服务的按带宽计费的价格非常高，如果要提升到 5+Mbps 往往需要远高于其他配置的成本，并且会造成闲时带宽的浪费。如果可以接受按流量计费（每 GB 一般 0.8 元上下），则带宽大小本身不会被计费，可以设置到 100+Mbps，运行 FVTT 绰绰有余。

### 系统
参见[部署方式对比](../#服务器部署方式对比)。

*值得注意的是，Docker 部署方式可使用任意一个主流的 Linux 发行版作为操作系统*。

### 地域
云服务器的数据中心地理位置可能是最能直接影响体验的 *非直观* 要素，需要斟酌。

数据中心的地理位置，可以决定以下几个重要的判断要素：
- 网络连接质量
    - 墙内玩家占多数，甚至全部都是，那最好选择大陆或者香港的云服务，或者其他 CN2 线路服务器；反之全部都在境外的话，强烈建议选择境外云服务
    - 如果境内外玩家都有，可以考虑在香港部署，大多数的香港数据中心对境内外的访问质量都还算不错，至少不需要考虑境外玩家访问香港服务器的质量，而境内需要先行评估（或者使用全站加速，并且配置为全球加速）
    - 考虑玩家时也要注意，FVTT 一次部署可以一直使用。如果一直使用且玩家变动很大，GM 可以只考虑自己的访问质量
    - 尽管境内服务器对墙内玩家提供了更优质的访问质量，但同时也因为墙的存在，更难以下载位于境外服务器上的 FVTT 的游戏系统、MOD 等
- 域名、备案
    - 境内云服务器上，如果提供有域名的网页服务（直接访问 IP 并使用其他端口除外），则一定需要备案才能访问
    - 境外（比如香港）的云服务器，不需要备案即可提供域名访问
    - 如果在境内购买云服务，域名最好在同一家云服务提供商处购买；如果在境外，域名可以在 GoDaddy 或境内的云服务提供商购买
- 价格
    - 境内云服务比境外贵不少，配置、带宽的价格都要高
    - 考虑学生机的价格，如果能购买学生机，价格远比正常购买便宜，但往往会因此只能购买位于境内的固定地理位置的数据中心（参见[学生机](#学生机)）

### 厂商
厂商虽然对使用云服务的体验影响很大，但没必要比较性能（FVTT 不太吃性能），也不必评论谁好谁坏。

主流购买选择：
> 境内：阿里云、腾讯云
<br/>
> 境外：阿里云（香港为主）、 AWS、 Azure、搬瓦工

### 学生机
阿里云、腾讯云、百度云等等，会对国内学生提供学生优惠。

这些学生机面向大学生推出，一般年龄不超过 24 岁的用户都可以享受折扣，使得一台单核心 2GB 内存的服务器仅需 10 元/月或更低，拿来开 FVTT 服务器正好。

但**需要注意**以下的坑：
- 带宽：不少学生机默认只给 1Mbps 的带宽，正如上文所提到的那样，用来运行 FVTT 只会让你怀疑人生
- 某某云：某某云的学生机目前只有 ARM 架构的 CPU 可选。如果你对 Linux 没有太多使用经验，你可能会怀疑买了假服务器

一般提到学生机，都会购买国内的。但如果不嫌麻烦的话（需要通过国际学生认证，或教育邮箱认证），国际上的学生优惠，可选项会很多：

比如通过 GitHub 学生认证，可以获得：
- DigitalOcean 学生优惠（送 50 刀，单核 1G 配置，可以购买 10 个月）
- Azure 学生优惠（送 100 刀，单核 1G 配置的香港服务器，可以购买 9 个月）
- Namecheap 的域名一年
- ...

如果认证无法通过，那境内最好的选择可能就是阿里云轻量应用服务器，简单直接没有别的套路，5Mbps 还算能用，每个月 1TB 的流量跑 FVTT 管够。

## 登入 Linux 云服务器
相较于 Windows 服务器通过远程桌面的连接方式，Linux 服务器通过 SSH（并不需要知道这是什么）进行连接对新接触的用户来说，稍微显得不友好了一些，但好在常见的云服务商都提供了文档，可以较为方便地连接。

以下介绍常见云服务提供商的 Linux 服务器连接方式：

- **阿里云**：
    - 云服务器 ECS：按照 [ECS Workbench 文档](https://help.aliyun.com/document_detail/147650.html#title-rxh-1ss-110)，使用终端连接
    - 轻量应用服务器 SWAS：在服务器`概览`页面，点击右上角的`远程连接`
- **腾讯云**：
    - 云服务器：按照[标准登录方式](https://cloud.tencent.com/document/product/213/5436)连接
    - 轻量应用服务器：按照 [WebShell 方式](https://cloud.tencent.com/document/product/1207/44642)登录
- **Microsoft Azure**：参见 [Azure SSH 文档](https://docs.microsoft.com/zh-cn/azure/virtual-machines/linux/ssh-from-windows)
- **Amazon Web Services (AWS)**：参见 [AWS SSH 文档](https://docs.aws.amazon.com/zh_cn/AWSEC2/latest/UserGuide/AccessingInstancesLinux.html)
- **Google Cloud Platform (GCP)**：参见 [GCP SSH 文档](https://cloud.google.com/compute/docs/ssh-in-browser)

## 其他问题
除了选购以外，使用云服务器过程中也可能遇到其他问题。

### 部署完毕后无法访问 
无论使用那种方式部署，完毕后，如果无法访问，常常是因为云服务器的防火墙设置，尚未放行 FVTT 正在使用的端口。

一般来说，如果设置了域名并反代，需要设置**入方向**的端口 80, 443 开放。

而如果只是使用 30000 端口或者修改的其他端口，只需要设置对应端口在**入方向**上开放即可。

或者，可以放行所有端口，更方便用户正常使用。

> [Docker 部署方式自动脚本](../docker/#自动部署脚本安装流程)如果不使用域名，文件管理器的网站需要打开入方向 30001 端口，仪表盘需要打开入方向 30002 端口。

以下是几种常见的云服务器的防火墙设置方法：
- [阿里云 ECS](https://help.aliyun.com/document_detail/25471.html)
    - [阿里云轻量应用服务器](https://help.aliyun.com/document_detail/59086.html)
- [腾讯云 CVM](https://cloud.tencent.com/document/product/213/15377)
    - [腾讯轻量应用服务器](https://cloud.tencent.com/document/product/1207/44577)
- [Azure VM](https://docs.microsoft.com/zh-cn/azure/virtual-machines/windows/nsg-quickstart-portal)
- [AWS EC2](https://aws.amazon.com/cn/premiumsupport/knowledge-center/connect-http-https-ec2/)
